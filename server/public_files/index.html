<!DOCTYPE html>
<html>
	<head>
		<style>
a {
	color: rgb(0, 0, 200) !important;
}
		</style>
	</head>
	<body>
		<h3>SPC Games</h3>
		<h5>Running games:</h5>
		<ul id="games"></ul>
		<h5><a href="./create">New game...</a></h5>
		<script>
var x = new XMLHttpRequest()
x.open("GET", "/gamelist")
x.addEventListener("loadend", (e) => {
	/** @type {string} */
	var t = e.target.responseText;
	if (t.length == 0) {
		var elm = document.createElement("li")
		elm.innerText = "There are no games currently in progress!"
		document.querySelector("#games").appendChild(elm)
		return
	}
	var games = t.split("\n").map((v) => v.split("|||"))
	for (var info of games) {
		var elm = document.createElement("li")
		elm.appendChild(document.createElement("a"))
		elm.children[0].innerText = info[0] + " - " + info[1]
		elm.children[0].setAttribute("href", "game/" + info[2] + "/")
		elm.appendChild(document.createElement("span"))
		elm.children[1].innerHTML = " (Status: " + info[3] + ")"
		document.querySelector("#games").appendChild(elm)
	}
})
x.send()
		</script>
	</body>
</html>